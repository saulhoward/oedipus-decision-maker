########################################################### 
## .htaccess file auto-generated on 2010-08-10.
## 
## DO NOT EDIT THIS FILE!
## 
## Find and edit the various doc-root.htaccess files and 
## then run the assemble-htaccess script in the public-html
## core module.
########################################################### 

## Start of start core file.
## The .htaccess fragment that starts the .htaccess file
## for the DOCUMENT_ROOT.
##
## © 2007-08-03, RFI

<IfModule mod_rewrite.c>
	RewriteEngine on
</IfModule>

## End of start core file.
## Start of project-specific file.
# Fragment of the doc root .htaccess file for the Oedipus Decision Maker project-specific
#
# @copyright 2008-02-24, RFI
# @copyright 2008-04-27, SANH

# These rules provide a clean url for each drama, using the oedipus_dramas.unique_name field

<IfModule mod_rewrite.c>
	# Translate numerical IDs to the the relevant drama.
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^dramas/(\d+) /?oo-page=1&page-class=Oedipus_DramaPage&drama_id=$1
	
	# Translate Drama Unique Names to the the relevant drama.
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^dramas/([-\w]+) /?oo-page=1&page-class=Oedipus_DramaPage&drama_unique_name=$1

	# Translate numerical IDs to the the relevant table PNG 
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^frames/images/frame-(\d+).png /?oo-page=1&page-class=Oedipus_FramePNGImage&frame_id=$1
	# Translate numerical IDs to the the relevant table PNG Thumbnail
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^frames/images/thumbnails/frame-(\d+)_(\d+)x(\d+).png /?oo-page=1&page-class=Oedipus_FramePNGImage&frame_id=$1&thumbnail=1&max_width=$2&max_height=$3

</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/dramas/([-\w]+) /?oo-page=1&page-class=Oedipus_DramaPage&drama_unique_name=$1
</IfModule>

## End of project-specific file.
## Start of the db-pages plug-in module's file.
# Fragment of the doc root .htaccess file for the db-pages module.
#
# @copyright 2008-02-24, RFI

<IfModule mod_rewrite.c>
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^db-pages/([-\w]+)\.html /haddock/public-html/public-html/index.php?oo-page=1&pcro-factory=DBPages_PCROFactory&page=$1
</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/db-pages/([-\w]+)\.html /haddock/public-html/public-html/index.php?oo-page=1\&pcro-factory=DBPages_PCROFactory\&page=$1
</IfModule>

## End of the db-pages plug-in module's file.
## Start of the mailing-list plug-in module's file.
# Fragment of the DOC_ROOT .htaccess file for the mailing list plug-in
#
# @copyright RFI, 2008-02-24

<IfModule mod_rewrite.c>
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^mailing-list/([a-z-]*)\.([a-z-]*) /haddock/public-html/public-html/index.php?oo-page=1&pcro-factory=MailingList_PCROFactory&page=$1&type=html
</IfModule>


<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/mailing-list/([a-z-]*)\.([a-z-]*) /haddock/public-html/public-html/index.php?oo-page=1\&pcro-factory=MailingList_PCROFactory\&page=$1\&type=html
</IfModule>
## End of the mailing-list plug-in module's file.
## Start of the admin core module's file.
## .htaccess fragment for the admin core module.
##
## © 2007-08-03, RFI

<IfModule mod_rewrite.c>
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^admin.html /hc/admin/login.html
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^admin/hc/([a-z-]+)/([a-z-]+).([a-z-]+)$ /?section=haddock&module=admin&page=admin-includer&type=$3&admin-section=haddock&admin-module=$1&admin-page=$2
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^admin/hpi/([a-z-]+)/([a-z-]+).([a-z-]+)$ /?section=haddock&module=admin&page=admin&admin-section=plug-ins&admin-module=$1&admin-page=$2&admin-type=$3
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^admin/ps/([a-z-]+).([a-z-]+)$ /?section=haddock&module=admin&page=admin&admin-section=project-specific&admin-page=$1&admin-type=$2
	
	# Shouldn't this be deprecated and removed?
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^admin/?(.*) /haddock/admin/public-html/$1
</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/admin.html /hc/admin/login.html
	
	RedirectMatch temp ^/admin/hc/([a-z-]+)/([a-z-]+).([a-z-]+)$ /haddock/public-html/public-html/index.php?section=haddock\&module=admin\&page=admin-includer\&type=$3\&admin-section=haddock\&admin-module=$1\&admin-page=$2
	
	RedirectMatch temp ^/admin/hpi/([a-z-]+)/([a-z-]+).([a-z-]+)$ /haddock/public-html/public-html/index.php?section=haddock\&module=admin\&page=admin\&admin-section=plug-ins\&admin-module=$1\&admin-page=$2\&admin-type=$3
	
	RedirectMatch temp ^/admin/ps/([a-z-]+).([a-z-]+)$ /haddock/public-html/public-html/index.php?section=haddock\&module=admin\&page=admin\&admin-section=project-specific\&admin-page=$1\&admin-type=$2
	
	# Shouldn't this be deprecated and removed?
	RedirectMatch temp ^/admin/?(.*) /haddock/admin/public-html/$1
</IfModule>

## End of the admin core module's file.
## Start of the database core module's file.
## .htaccess fragment for the DOC_ROOT for the database core module.
##
## © 2007-08-03, RFI

<IfModule mod_rewrite.c>
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^hc-database-img-cache/(\d+).([a-z]+) /hc/database/images/$1.$2
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^hc/database/images/(\d+).([a-z]+) /?section=haddock&module=database&page=db-image&type=$2&image_id=$1
	
	# Hasn't this been superseded by the DB pages plug-in?
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^hc/database/db-pages/([-a-z]+)\.html$ /?section=haddock&module=database&page=db-page&type=html&page-name=$1
</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/hc-database-img-cache/(\d+).([a-z]+) /haddock/public-html/public-html/index.php?section=haddock\&module=database\&page=db-image\&type=$2\&image_id=$1
	
	RedirectMatch temp ^/hc/database/images/(\d+).([a-z]+) /haddock/public-html/public-html/index.php?section=haddock\&module=database\&page=db-image\&type=$2\&image_id=$1
	
	RedirectMatch temp ^/hc/database/db-pages/([-a-z]+)\.html$ /haddock/public-html/public-html/index.php?section=haddock\&module=database\&page=db-page\&type=html\&page-name=$1
</IfModule>

## End of the database core module's file.
## Start of the public-html core module's file.
## .htaccess fragment for the public-html core module.
##
## © 2007-08-03, RFI

<IfModule mod_rewrite.c>
	#RewriteRule ^/?$ /haddock/public-html/public-html/
	RewriteRule ^/?$ /haddock/public-html/public-html/index.php
	
	#RewriteRule ^$ /haddock/public-html/public-html/index.php?section=haddock&module=public-html&page=home&type=html
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^styles/(.*) /project-specific/public-html/styles/$1
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^scripts/(.*) /project-specific/public-html/scripts/$1
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^images/(.*) /project-specific/public-html/images/$1
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^files/(.*) /project-specific/public-html/files/$1
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^([^/]*)\.htm$ $1.html
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^favicon.ico /project-specific/public-html/images/favicon.ico
	
	#RewriteRule ^\?(.+)$ /haddock/public-html/public-html/index.php?$1
</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/?$ /haddock/public-html/public-html/index.php
	
	RedirectMatch temp ^/styles/(.*) /project-specific/public-html/styles/$1
	
	RedirectMatch temp ^/scripts/(.*) /project-specific/public-html/scripts/$1
	
	RedirectMatch temp ^/images/(.*) /project-specific/public-html/images/$1
	
	RedirectMatch temp ^/files/(.*) /project-specific/public-html/files/$1
	
	RedirectMatch temp ^/([^/]*)\.htm$ $1.html
</IfModule>

## End of the public-html core module's file.
## Start of end core file.
## The .htaccess fragment that finishes the .htaccess file
## for the DOCUMENT_ROOT.
##
## © 2007-08-03, RFI

<IfModule mod_rewrite.c>
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^hpi/([a-z-]+)/([a-z-]+).([a-z]+)$ /haddock/public-html/public-html/index.php?section=plug-ins&module=$1&page=$2&type=$3
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^hc/([a-z-]+)/([a-z-]+).([a-z]+)$ /haddock/public-html/public-html/index.php?section=haddock&module=$1&page=$2&type=$3
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^([a-z-]+)\.([a-z]+)$ /haddock/public-html/public-html/index.php?section=project-specific&page=$1&type=$2
	
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^([A-Z0-9][a-zA-Z0-9]*_[A-Z0-9][a-zA-Z0-9]*)$ /haddock/public-html/public-html/index.php?oo-page=1&page-class=$1
</IfModule>

# Back up using mod_alias

<IfModule !mod_rewrite.c>
	RedirectMatch temp ^/hpi/([a-z-]+)/([a-z-]+).([a-z]+)$ /haddock/public-html/public-html/index.php?section=plug-ins\&module=$1\&page=$2\&type=$3
	
	RedirectMatch temp ^/hc/([a-z-]+)/([a-z-]+).([a-z]+)$ /haddock/public-html/public-html/index.php?section=haddock\&module=$1\&page=$2\&type=$3
	
	RedirectMatch temp ^/([a-z-]+)\.([a-z]+)$ /haddock/public-html/public-html/index.php?section=project-specific\&page=$1\&type=$2
	
	RedirectMatch temp ^/([A-Z0-9][a-zA-Z0-9]*_[A-Z0-9][a-zA-Z0-9]*)$ /haddock/public-html/public-html/index.php?oo-page=1\&page-class=$1
</IfModule>

## End of end core file.
